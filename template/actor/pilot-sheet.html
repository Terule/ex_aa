<form class="sheet actor pilot-sheet" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100" />
    <div class="header-fields">
      <h1><input name="name" type="text" value="{{actor.name}}" placeholder="Nome do Piloto" /></h1>
      <div class="flexrow">
        <label>Codinome:</label>
        <input type="text" name="system.identificacao.codinome" value="{{system.identificacao.codinome}}" />
        <label>Patente:</label>
        <select name="system.identificacao.patente" data-dtype="String">
          <option value="">-- Selecione --</option>
          {{#each patentes}}
          <option value="{{this}}" {{#if (eq ../system.identificacao.patente this)}}selected{{/if}}>{{this}}</option>
          {{/each}}
        </select>
      </div>
    </div>
  </header>

  <div class="combat-stats-section">
    <div class="limiar-dano-section card">
      <h3>Limiar de Dano</h3>
      <table class="limiar-table">
        <thead>
          <tr>
            <th></th>
            <th>Leve</th>
            <th>M√©dio</th>
            <th>Grave</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>Limiar</th>
            <td>
              <input type="number" name="system.limiarDano.leve.limiar" value="{{number system.limiarDano.leve.limiar}}" readonly />
            </td>
            <td>
              <input type="number" name="system.limiarDano.moderado.limiar" value="{{number system.limiarDano.moderado.limiar}}" readonly />
            </td>
            <td>
              <input type="number" name="system.limiarDano.grave.limiar" value="{{number system.limiarDano.grave.limiar}}" readonly />
            </td>
          </tr>
          <tr>
            <th>Marca√ß√µes</th>
            <td>
              <input type="number" name="system.limiarDano.leve.marcacoes" value="{{number system.limiarDano.leve.marcacoes}}" min="0" max="3" step="1" data-dtype="Number" />
            </td>
            <td>
              <input type="number" name="system.limiarDano.moderado.marcacoes" value="{{number system.limiarDano.moderado.marcacoes}}" min="0" max="3" step="1" data-dtype="Number" />
            </td>
            <td>
              <input type="number" name="system.limiarDano.grave.marcacoes" value="{{number system.limiarDano.grave.marcacoes}}" min="0" max="1" step="1" data-dtype="Number" />
            </td>
          </tr>
        </tbody>
      </table>
      <div class="penalidades">
        <label>Penalidades</label>
        <input type="number" name="system.limiarDano.penalidades" value="{{number system.limiarDano.penalidades}}" min="0" step="1" data-dtype="Number" />
      </div>
    </div>

    <div class="armadura-section card">
      <h3>Armadura</h3>
      <table class="armadura-table">
        <tbody>
          <tr>
            <td>Armadura Equipada:</td>
            <td>
              <select name="system.armadura.equipada" data-dtype="String" class="item-select-armadura">
                <option value="">-- Nenhuma --</option>
                {{#each armaduras}}
                <option value="{{this.id}}" {{#if (eq ../system.armadura.equipada this.id)}}selected{{/if}}>
                  {{this.name}} (Prote√ß√£o: {{this.system.protecao}})
                </option>
                {{/each}}
              </select>
            </td>
          </tr>
          <tr>
            <td>Total</td>
            <td>
              <input type="number" name="system.armadura.total" value="{{number system.armadura.total}}" min="0" step="1" data-dtype="Number" />
            </td>
          </tr>
          <tr>
            <td>Dano</td>
            <td>
              <input type="number" name="system.armadura.dano" value="{{number system.armadura.dano}}" min="0" step="1" data-dtype="Number" />
            </td>
          </tr>
          <tr>
            <td>Atual</td>
            <td>
              <input type="number" name="system.armadura.atual" value="{{number system.armadura.atual}}" readonly />
            </td>
          </tr>
        </tbody>
      </table>
      <button type="button" class="roll-armadura" data-label="Armadura">üé≤ Rolar Armadura</button>
    </div>
  </div>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="identificacao">Identifica√ß√£o</a>
    <a class="item" data-tab="atributos">Atributos</a>
    <a class="item" data-tab="especializacao">Especializa√ß√£o</a>
    <a class="item" data-tab="exacom">EXACOM</a>
    <a class="item" data-tab="inventario">Invent√°rio</a>
    <a class="item" data-tab="vinculo">V√≠nculo</a>
  </nav>

  <section class="sheet-body">
    <div class="tab identificacao-tab" data-tab="identificacao">
      <div class="form-group">
        <label>Data de Admiss√£o:</label>
        <input type="text" name="system.identificacao.admissao" value="{{system.identificacao.admissao}}" />
      </div>
      <div class="form-group">
        <label>Escala:</label>
        <input type="text" name="system.identificacao.escala" value="{{system.identificacao.escala}}" />
      </div>
      <div class="form-group">
        <label>EXACOM:</label>
        <input type="text" name="system.identificacao.exacom" value="{{system.identificacao.exacom}}" />
      </div>
    </div>

    <div class="tab atributos-tab" data-tab="atributos">
      <h3>F√≠sicos</h3>
      <div class="form-group">
        <label>For√ßa:</label>
        <input type="number" name="system.atributos.fisicos.forca" value="{{number system.atributos.fisicos.forca}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.fisicos.forca" data-label="For√ßa">üé≤</button>
      </div>
      <div class="form-group">
        <label>Destreza:</label>
        <input type="number" name="system.atributos.fisicos.destreza" value="{{number system.atributos.fisicos.destreza}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.fisicos.destreza" data-label="Destreza">üé≤</button>
      </div>
      <div class="form-group">
        <label>Vigor:</label>
        <input type="number" name="system.atributos.fisicos.vigor" value="{{number system.atributos.fisicos.vigor}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.fisicos.vigor" data-label="Vigor">üé≤</button>
      </div>

      <h3>Mentais</h3>
      <div class="form-group">
        <label>Conhecimento:</label>
        <input type="number" name="system.atributos.mentais.conhecimento" value="{{number system.atributos.mentais.conhecimento}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.mentais.conhecimento" data-label="Conhecimento">üé≤</button>
      </div>
      <div class="form-group">
        <label>Perspic√°cia:</label>
        <input type="number" name="system.atributos.mentais.perspicacia" value="{{number system.atributos.mentais.perspicacia}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.mentais.perspicacia" data-label="Perspic√°cia">üé≤</button>
      </div>
      <div class="form-group">
        <label>Resili√™ncia:</label>
        <input type="number" name="system.atributos.mentais.resiliencia" value="{{number system.atributos.mentais.resiliencia}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.mentais.resiliencia" data-label="Resili√™ncia">üé≤</button>
      </div>

      <h3>Sociais</h3>
      <div class="form-group">
        <label>Eloqu√™ncia:</label>
        <input type="number" name="system.atributos.sociais.eloquencia" value="{{number system.atributos.sociais.eloquencia}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.sociais.eloquencia" data-label="Eloqu√™ncia">üé≤</button>
      </div>
      <div class="form-group">
        <label>Dissimula√ß√£o:</label>
        <input type="number" name="system.atributos.sociais.dissimulacao" value="{{number system.atributos.sociais.dissimulacao}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.sociais.dissimulacao" data-label="Dissimula√ß√£o">üé≤</button>
      </div>
      <div class="form-group">
        <label>Presen√ßa:</label>
        <input type="number" name="system.atributos.sociais.presenca" value="{{number system.atributos.sociais.presenca}}" min="1" max="5" step="1" data-dtype="Number" />
        <button type="button" class="roll-atributo" data-atributo="atributos.sociais.presenca" data-label="Presen√ßa">üé≤</button>
      </div>

      <h3>Pontos de Atributo</h3>
      <div class="form-group">
        <label>Total:</label>
        <input type="number" name="system.pontosAtributo.total" value="{{number system.pontosAtributo.total}}" readonly />
      </div>
      <div class="form-group">
        <label>Distribu√≠dos:</label>
        <input type="number" name="system.pontosAtributo.distribuidos" value="{{number system.pontosAtributo.distribuidos}}" readonly />
      </div>
      <div class="form-group">
        <label>Restantes:</label>
        <input type="number" name="system.pontosAtributo.restantes" value="{{number system.pontosAtributo.restantes}}" readonly />
      </div>

      <h3>Combate</h3>
      <div class="form-group">
        <label>Iniciativa:</label>
        <input type="number" name="system.combate.iniciativa" value="{{number system.combate.iniciativa}}" readonly />
        <button type="button" class="roll-iniciativa" title="Rolar Iniciativa">üé≤</button>
      </div>
      <div class="form-group">
        <label>Mobilidade:</label>
        <input type="number" name="system.combate.mobilidade" value="{{number system.combate.mobilidade}}" readonly />
      </div>
      <div class="form-group">
        <label>Esquiva:</label>
        <input type="number" name="system.combate.esquiva" value="{{number system.combate.esquiva}}" readonly />
      </div>

      <h3>EXApoints</h3>
      <div class="form-group">
        <label>EXApoints M√°ximo:</label>
        <input type="number" name="system.exapoints.maximo" value="{{number system.exapoints.maximo}}" readonly />
        <small>Baseado na Resili√™ncia (Atributos Mentais)</small>
      </div>
      <div class="form-group">
        <label>EXApoints Gastos:</label>
        <input type="number" name="system.exapoints.gastos" value="{{number system.exapoints.gastos}}" min="0" step="1" data-dtype="Number" />
      </div>
      <div class="form-group">
        <label>EXApoints Atual:</label>
        <input type="number" name="system.exapoints.atual" value="{{number system.exapoints.atual}}" readonly />
      </div>
      <div class="form-group">
        <label>Overdrive:</label>
        <input type="number" name="system.exapoints.overdrive" value="{{#if system.exapoints.overdrive}}{{number system.exapoints.overdrive}}{{else}}1{{/if}}" min="0" step="1" data-dtype="Number" />
      </div>
    </div>

    <div class="tab especializacao-tab" data-tab="especializacao">
      <h3>Especializa√ß√µes F√≠sicas</h3>
      <div class="especializacoes-section" data-tipo="fisicos">
        <button type="button" class="especializacao-create" data-tipo="fisicos">+ Adicionar Especializa√ß√£o</button>
        <table class="especializacoes-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Atributo</th>
              <th>Dado Base</th>
              <th>B√¥nus</th>
            <th class="acoes">A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            {{#each especializacoes.fisicos}}
            <tr data-index="{{@index}}" data-tipo="fisicos">
              <td>{{this.nome}}</td>
              <td>{{this.atributo}}</td>
              <td>{{this.dadoBase}}d6</td>
              <td>{{this.dadoBonus}}</td>
              <td>
                <button type="button" class="roll-especializacao" data-tipo="fisicos" data-index="{{@index}}">üé≤</button>
                <button type="button" class="edit-especializacao" data-tipo="fisicos" data-index="{{@index}}">‚úèÔ∏è</button>
                <button type="button" class="delete-especializacao" data-tipo="fisicos" data-index="{{@index}}">üóëÔ∏è</button>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>

      <h3>Especializa√ß√µes Mentais</h3>
      <div class="especializacoes-section" data-tipo="mentais">
        <button type="button" class="especializacao-create" data-tipo="mentais">+ Adicionar Especializa√ß√£o</button>
        <table class="especializacoes-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Atributo</th>
              <th>Dado Base</th>
              <th>B√¥nus</th>
              <th class="acoes">A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            {{#each especializacoes.mentais}}
            <tr data-index="{{@index}}" data-tipo="mentais">
              <td>{{this.nome}}</td>
              <td>{{this.atributo}}</td>
              <td>{{this.dadoBase}}d6</td>
              <td>{{this.dadoBonus}}</td>
              <td>
                <button type="button" class="roll-especializacao" data-tipo="mentais" data-index="{{@index}}">üé≤</button>
                <button type="button" class="edit-especializacao" data-tipo="mentais" data-index="{{@index}}">‚úèÔ∏è</button>
                <button type="button" class="delete-especializacao" data-tipo="mentais" data-index="{{@index}}">üóëÔ∏è</button>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>

      <h3>Especializa√ß√µes Sociais</h3>
      <div class="especializacoes-section" data-tipo="sociais">
        <button type="button" class="especializacao-create" data-tipo="sociais">+ Adicionar Especializa√ß√£o</button>
        <table class="especializacoes-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Atributo</th>
              <th>Dado Base</th>
              <th>B√¥nus</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            {{#each especializacoes.sociais}}
            <tr data-index="{{@index}}" data-tipo="sociais">
              <td>{{this.nome}}</td>
              <td>{{this.atributo}}</td>
              <td>{{this.dadoBase}}d6</td>
              <td>{{this.dadoBonus}}</td>
              <td>
                <button type="button" class="roll-especializacao" data-tipo="sociais" data-index="{{@index}}">üé≤</button>
                <button type="button" class="edit-especializacao" data-tipo="sociais" data-index="{{@index}}">‚úèÔ∏è</button>
                <button type="button" class="delete-especializacao" data-tipo="sociais" data-index="{{@index}}">üóëÔ∏è</button>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>

    <div class="tab exacom-tab" data-tab="exacom">
      <h3>EXACOM</h3>
      <p>EXACOM ser√° implementado em breve.</p>
    </div>

    <div class="tab inventario-tab" data-tab="inventario">
      <h3>Equipamentos</h3>
      <table class="inventario-table">
        <thead>
          <tr>
            <th>A√ß√£o</th>
            <th>Equipamento</th>
          </tr>
        </thead>
        <tbody>
          {{#each system.inventario.equipamentos}}
          <tr>
            <td>
              <button type="button" class="roll-equipamento" data-index="{{@index}}" data-nome="{{nome}}" {{#unless id}}disabled{{/unless}}>üé≤</button>
            </td>
            <td>
              <select name="system.inventario.equipamentos.{{@index}}.id" data-dtype="String" class="item-select-equipamento">
                <option value="">-- Nenhum --</option>
                {{#each ../equipamentos}}
                <option value="{{this.id}}" {{#if (eq ../id this.id)}}selected{{/if}}>{{this.name}}</option>
                {{/each}}
              </select>
              <input type="hidden" name="system.inventario.equipamentos.{{@index}}.nome" value="{{nome}}" />
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>

      <h3>Armas</h3>
      <table class="inventario-table">
        <thead>
          <tr>
            <th>A√ß√£o</th>
            <th>Arma</th>
            <th>Dano</th>
            <th>Alcance</th>
            <th>B√¥nus</th>
          </tr>
        </thead>
        <tbody>
          {{#each system.inventario.armas}}
          <tr>
            <td>
              <button type="button" class="roll-arma" data-index="{{@index}}" data-nome="{{nome}}" {{#unless id}}disabled{{/unless}}>üé≤</button>
            </td>
            <td>
              <select name="system.inventario.armas.{{@index}}.id" data-dtype="String" class="item-select-arma">
                <option value="">-- Nenhuma --</option>
                {{#each ../armas}}
                <option value="{{this.id}}" {{#if (eq ../id this.id)}}selected{{/if}}>{{this.name}}</option>
                {{/each}}
              </select>
              <input type="hidden" name="system.inventario.armas.{{@index}}.nome" value="{{nome}}" />
            </td>
            <td>
              <input type="number" name="system.inventario.armas.{{@index}}.dano" value="{{dano}}" min="0" data-dtype="Number" />
            </td>
            <td>
              <input type="text" name="system.inventario.armas.{{@index}}.alcance" value="{{alcance}}" />
            </td>
            <td>
              <input type="number" name="system.inventario.armas.{{@index}}.bonus" value="{{bonus}}" data-dtype="Number" />
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    <div class="tab vinculo-tab" data-tab="vinculo">
      <div class="companion-section card">
        <div class="form-group companion-select">
          <label>Companion Vinculado:</label>
          <select name="system.companionId" data-dtype="String">
            <option value="">-- Nenhum --</option>
            {{#each availableCompanions}}
            <option value="{{this.id}}" {{#if (eq ../system.companionId this.id)}}selected{{/if}}>{{this.name}}</option>
            {{/each}}
          </select>
        </div>
        {{#if currentCompanion}}
        <div class="companion-card">
          <div class="companion-card-header">
            <img src="{{currentCompanion.img}}" alt="{{currentCompanion.name}}" />
            <div class="details">
              <h4>{{currentCompanion.name}}</h4>
              <p>{{currentCompanion.informacoes.tipo}}</p>
              <div class="meta">
                <span><strong>Categoria:</strong> {{currentCompanion.informacoes.categoria}}</span>
                <span><strong>Escala:</strong> {{currentCompanion.informacoes.escala}}</span>
              </div>
              <button type="button" class="open-companion-sheet">Abrir ficha</button>
            </div>
          </div>
        </div>
        {{else}}
        <p class="companion-empty">
          Vincule um companion para habilitar atalhos e visualiza√ß√£o r√°pida.
        </p>
        {{/if}}
      </div>

      {{#if currentCompanion}}
      <div class="linked-companion-view">
        <div class="card info-gerais-card">
          <h3>Informa√ß√µes Gerais</h3>
          <table class="info-gerais">
            <tbody>
              <tr>
                <th>Tipo</th>
                <td>{{currentCompanion.system.informacoes.tipo}}</td>
                <th>Categoria</th>
                <td>{{currentCompanion.system.informacoes.categoria}}</td>
              </tr>
              <tr>
                <th>Escala</th>
                <td>{{currentCompanion.system.informacoes.escala}}</td>
                <th>Pontos Restantes</th>
                <td>{{number currentCompanion.system.pontosAtributo.restantes}}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="armadura-limiar-row">
          <div class="card limiar-section">
            <h3>Limiar de Dano</h3>
            <table class="limiar-table">
              <thead>
                <tr>
                  <th></th>
                  <th>Leve</th>
                  <th>M√©dio</th>
                  <th>Grave</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Limiar</th>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.leve.limiar}}" readonly /></td>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.moderado.limiar}}" readonly /></td>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.grave.limiar}}" readonly /></td>
                </tr>
                <tr>
                  <th>Marca√ß√µes</th>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.leve.marcacoes}}" readonly /></td>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.moderado.marcacoes}}" readonly /></td>
                  <td><input type="number" value="{{number currentCompanion.system.limiarDano.grave.marcacoes}}" readonly /></td>
                </tr>
              </tbody>
            </table>
            <div class="penalidades">
              <label>Penalidades</label>
              <input type="number" value="{{number currentCompanion.system.limiarDano.penalidades}}" readonly />
            </div>
          </div>

          <div class="card">
            <h3>Armadura</h3>
            <table>
              <tbody>
                <tr>
                  <th>Total</th>
                  <td><input type="number" value="{{number currentCompanion.system.armadura.total}}" readonly /></td>
                </tr>
                <tr>
                  <th>Dano</th>
                  <td><input type="number" value="{{number currentCompanion.system.armadura.dano}}" readonly /></td>
                </tr>
                <tr>
                  <th>Atual</th>
                  <td><input type="number" value="{{number currentCompanion.system.armadura.atual}}" readonly /></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="card primary-attributes">
          <h3>Atributos Prim√°rios</h3>
          <table>
            <tbody>
              <tr>
                <th>FOR</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.fisicos.forca}}" readonly /></td>
                <th>CON</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.mentais.conhecimento}}" readonly /></td>
                <th>ELO</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.sociais.eloquencia}}" readonly /></td>
              </tr>
              <tr>
                <th>DES</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.fisicos.destreza}}" readonly /></td>
                <th>PER</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.mentais.perspicacia}}" readonly /></td>
                <th>DIS</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.sociais.dissimulacao}}" readonly /></td>
              </tr>
              <tr>
                <th>VIG</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.fisicos.vigor}}" readonly /></td>
                <th>RES</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.mentais.resiliencia}}" readonly /></td>
                <th>PRE</th>
                <td><input type="number" value="{{number currentCompanion.system.atributos.sociais.presenca}}" readonly /></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card secondary-attributes">
          <h3>Atributos Secund√°rios</h3>
          <table>
            <tbody>
              <tr>
                <th>Esquiva</th>
                <td><input type="number" value="{{number currentCompanion.system.combate.esquiva}}" readonly /></td>
                <th>Mobilidade</th>
                <td><input type="number" value="{{number currentCompanion.system.combate.mobilidade}}" readonly /></td>
                <th>Iniciativa</th>
                <td><input type="number" value="{{number currentCompanion.system.combate.iniciativa}}" readonly /></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card pontos-section">
          <div>
            <strong>Pontos Utilizados:</strong>
            <span>{{number currentCompanion.system.pontosAtributo.distribuidos}}</span>
          </div>
          <div>
            <strong>Pontos Restantes:</strong>
            <span>{{number currentCompanion.system.pontosAtributo.restantes}}</span>
          </div>
        </div>

        <div class="card descricao-section">
          <h3>Descri√ß√£o</h3>
          <textarea readonly rows="4">{{currentCompanion.system.descricao}}</textarea>
          {{#if currentCompanion.descriptionHTML}}
          <div class="descricao-preview">
            {{{currentCompanion.descriptionHTML}}}
          </div>
          {{/if}}
        </div>

        <div class="card attack-section readonly">
          <h3>Ataques</h3>
          <table class="attack-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Atributo</th>
                <th>Dado Base</th>
                <th>Dado B√¥nus</th>
                <th>Condi√ß√£o</th>
                <th>Alcance</th>
                <th>Dano</th>
                <th>Efeito</th>
              </tr>
            </thead>
            <tbody>
              {{#if currentCompanion.ataquesList.length}}
              {{#each currentCompanion.ataquesList}}
              <tr>
                <td>{{this.nome}}</td>
                <td>{{this.atributoLabel}}</td>
                <td>{{this.atributoLabel}} ({{this.atributoValor}}d6)</td>
                <td>{{this.dadoBonus}}</td>
                <td>{{this.condicao}}</td>
                <td>{{this.alcance}}</td>
                <td>{{this.dano}}</td>
                <td>{{this.efeito}}</td>
              </tr>
              {{/each}}
              {{else}}
              <tr>
                <td colspan="8" class="empty-row">Nenhum ataque registrado.</td>
              </tr>
              {{/if}}
            </tbody>
          </table>
        </div>

        <div class="card habilidades-section readonly">
          <h3>Habilidades Especiais</h3>
          <table class="abilities-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Descri√ß√£o</th>
                <th>Usos (Atual / Total)</th>
              </tr>
            </thead>
            <tbody>
              {{#if currentCompanion.habilidadesList.length}}
              {{#each currentCompanion.habilidadesList}}
              <tr>
                <td>{{this.nome}}</td>
                <td>{{this.descricao}}</td>
                <td>{{this.usos.atual}} / {{this.usos.total}}</td>
              </tr>
              {{/each}}
              {{else}}
              <tr>
                <td colspan="3" class="empty-row">Nenhuma habilidade especial cadastrada.</td>
              </tr>
              {{/if}}
            </tbody>
          </table>
        </div>
      </div>
      {{/if}}
    </div>
  </section>
</form>

