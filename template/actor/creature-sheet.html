<form class="sheet actor creature-sheet" autocomplete="off">
  <header class="creature-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="120" width="120" />
    <div class="header-fields">
      <h1>
        <input type="text" name="name" value="{{actor.name}}" placeholder="Nome da Criatura" />
      </h1>
      <table class="info-gerais">
        <thead>
          <tr>
            <th colspan="4">Informa√ß√µes Gerais</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>Tipo</th>
            <td>
              <input type="text" name="system.informacoes.tipo" value="{{system.informacoes.tipo}}" placeholder="Aberra√ß√£o, Besta..." />
            </td>
            <th>Categoria</th>
            <td>
              <select name="system.informacoes.categoria" data-dtype="String">
                {{#each categorias}}
                <option value="{{this}}" {{#if (eq ../categoriaSelecionada this)}}selected{{/if}}>{{this}}</option>
                {{/each}}
              </select>
            </td>
          </tr>
          <tr>
            <th>Escala</th>
            <td>
              <select name="system.informacoes.escala" data-dtype="String">
                {{#each escalas}}
                <option value="{{this}}" {{#if (eq ../system.informacoes.escala this)}}selected{{/if}}>{{this}}</option>
                {{/each}}
              </select>
            </td>
            <th>Pontos</th>
            <td>
              <input type="number" value="{{categoriaPontos}}" readonly />
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </header>

  <nav class="creature-tabs tabs" data-group="creature">
    <a class="item" data-tab="status">Status</a>
    <a class="item" data-tab="ataques">Ataques</a>
  </nav>

  <section class="creature-tabs-content">
    <div class="tab" data-group="creature" data-tab="status">
      <div class="creature-columns">
      <div class="armadura-limiar-row">
        <div class="card limiar-section">
          <h3>Limiar de Dano</h3>
          <table class="limiar-table">
            <thead>
              <tr>
                <th></th>
                <th>Leve</th>
                <th>M√©dio</th>
                <th>Grave</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Limiar</th>
                <td><input type="number" name="system.limiarDano.leve.limiar" value="{{number system.limiarDano.leve.limiar}}" readonly /></td>
                <td><input type="number" name="system.limiarDano.moderado.limiar" value="{{number system.limiarDano.moderado.limiar}}" readonly /></td>
                <td><input type="number" name="system.limiarDano.grave.limiar" value="{{number system.limiarDano.grave.limiar}}" readonly /></td>
              </tr>
              <tr>
                <th>Marca√ß√µes</th>
                <td><input type="number" name="system.limiarDano.leve.marcacoes" value="{{number system.limiarDano.leve.marcacoes}}" min="0" max="3" data-dtype="Number" /></td>
                <td><input type="number" name="system.limiarDano.moderado.marcacoes" value="{{number system.limiarDano.moderado.marcacoes}}" min="0" max="3" data-dtype="Number" /></td>
                <td><input type="number" name="system.limiarDano.grave.marcacoes" value="{{number system.limiarDano.grave.marcacoes}}" min="0" max="1" data-dtype="Number" /></td>
              </tr>
            </tbody>
          </table>
          <div class="penalidades">
            <label>Penalidades</label>
            <input type="number" name="system.limiarDano.penalidades" value="{{number system.limiarDano.penalidades}}" min="0" data-dtype="Number" />
          </div>
        </div>

        <div class="card">
          <h3>Armadura</h3>
          <table>
            <tbody>
              <tr>
                <th>Total</th>
                <td><input type="number" name="system.armadura.total" value="{{number system.armadura.total}}" min="0" data-dtype="Number" /></td>
              </tr>
              <tr>
                <th>Dano</th>
                <td><input type="number" name="system.armadura.dano" value="{{number system.armadura.dano}}" min="0" data-dtype="Number" /></td>
              </tr>
              <tr>
                <th>Atual</th>
                <td><input type="number" name="system.armadura.atual" value="{{number system.armadura.atual}}" readonly /></td>
              </tr>
            </tbody>
          </table>
          <small>Informe manualmente o valor total da armadura. O valor atual √© calculado automaticamente.</small>
        </div>
      </div>

      <div class="primary-attributes card">
        <h3>Atributos Prim√°rios</h3>
        <table>
          <tbody>
            <tr>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.fisicos.forca">FOR</button></th>
              <td><input type="number" name="system.atributos.fisicos.forca" value="{{number system.atributos.fisicos.forca}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.mentais.conhecimento">CON</button></th>
              <td><input type="number" name="system.atributos.mentais.conhecimento" value="{{number system.atributos.mentais.conhecimento}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.sociais.eloquencia">ELO</button></th>
              <td><input type="number" name="system.atributos.sociais.eloquencia" value="{{number system.atributos.sociais.eloquencia}}" min="1" data-dtype="Number" /></td>
            </tr>
            <tr>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.fisicos.destreza">DES</button></th>
              <td><input type="number" name="system.atributos.fisicos.destreza" value="{{number system.atributos.fisicos.destreza}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.mentais.perspicacia">PER</button></th>
              <td><input type="number" name="system.atributos.mentais.perspicacia" value="{{number system.atributos.mentais.perspicacia}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.sociais.dissimulacao">DIS</button></th>
              <td><input type="number" name="system.atributos.sociais.dissimulacao" value="{{number system.atributos.sociais.dissimulacao}}" min="1" data-dtype="Number" /></td>
            </tr>
            <tr>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.fisicos.vigor">VIG</button></th>
              <td><input type="number" name="system.atributos.fisicos.vigor" value="{{number system.atributos.fisicos.vigor}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.mentais.resiliencia">RES</button></th>
              <td><input type="number" name="system.atributos.mentais.resiliencia" value="{{number system.atributos.mentais.resiliencia}}" min="1" data-dtype="Number" /></td>
              <th><button type="button" class="roll-atributo" data-atributo="system.atributos.sociais.presenca">PRE</button></th>
              <td><input type="number" name="system.atributos.sociais.presenca" value="{{number system.atributos.sociais.presenca}}" min="1" data-dtype="Number" /></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="secondary-attributes card">
        <h3>Atributos Secund√°rios</h3>
        <table>
          <tbody>
            <tr>
              <th>Esquiva</th>
              <td><input type="number" name="system.combate.esquiva" value="{{number system.combate.esquiva}}" readonly /></td>
              <th>Mobilidade</th>
              <td><input type="number" name="system.combate.mobilidade" value="{{number system.combate.mobilidade}}" readonly /></td>
              <th>Iniciativa</th>
              <td><input type="number" name="system.combate.iniciativa" value="{{number system.combate.iniciativa}}" readonly /></td>
            </tr>
          </tbody>
        </table>
        <div class="action-row">
          <button type="button" class="roll-iniciativa" title="Rolar Iniciativa">üé≤ Rolar Iniciativa</button>
        </div>
      </div>
    </div>

    <div class="card pontos-section">
      <div>
        <strong>Pontos Utilizados:</strong>
        <span>{{pontosDistribuidos}}</span>
      </div>
      <div>
        <strong>Pontos Restantes:</strong>
        <span>{{pontosRestantes}}</span>
      </div>
    </div>

    <div class="card descricao-section">
      <h3>Descri√ß√£o</h3>
      <textarea name="system.descricao" rows="4">{{system.descricao}}</textarea>
      {{#if descriptionHTML}}
      <div class="descricao-preview">
        {{{descriptionHTML}}}
      </div>
      {{/if}}
    </div>

    <div class="card referencia-categorias">
      <h4>Refer√™ncia de Categorias</h4>
      <table>
        <thead>
          <tr>
            <th>Categorias</th>
            <th>Pontos</th>
          </tr>
        </thead>
        <tbody>
          {{#each categoriasDetalhes}}
          <tr>
            <td>{{this.nome}}</td>
            <td>{{this.pontos}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    </div>

    <div class="tab" data-group="creature" data-tab="ataques">
      <div class="card attack-section">
        <div class="attack-header">
          <h3>Ataques</h3>
          <button type="button" class="attack-create">+ Adicionar Ataque</button>
        </div>
        <table class="attack-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Atributo</th>
              <th>Dado Base</th>
              <th>Dado B√¥nus</th>
              <th>Condi√ß√£o</th>
              <th>Alcance</th>
              <th>Dano</th>
              <th>Efeito</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            {{#if ataquesList.length}}
              {{#each ataquesList}}
              <tr>
                <td>{{this.nome}}</td>
                <td>{{this.atributoLabel}}</td>
                <td>{{this.atributoLabel}} ({{this.atributoValor}}d6)</td>
                <td>{{this.dadoBonus}}</td>
                <td>{{this.condicao}}</td>
                <td>{{this.alcance}}</td>
                <td>{{this.dano}}</td>
                <td>{{this.efeito}}</td>
                <td class="attack-actions">
                  <button type="button" class="attack-roll" data-index="{{this.index}}" title="Rolar">üé≤</button>
                  <button type="button" class="attack-edit" data-index="{{this.index}}" title="Editar">‚úèÔ∏è</button>
                  <button type="button" class="attack-delete" data-index="{{this.index}}" title="Excluir">üóëÔ∏è</button>
                </td>
              </tr>
              {{/each}}
            {{else}}
              <tr>
                <td colspan="9" class="empty-row">Nenhum ataque cadastrado.</td>
              </tr>
            {{/if}}
          </tbody>
        </table>
      </div>

    <div class="card habilidades-section">
        <div class="habilidade-header">
          <h3>Habilidades Especiais</h3>
          <button type="button" class="habilidade-create">+ Adicionar Habilidade</button>
        </div>
        <table class="abilities-table">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Descri√ß√£o</th>
              <th>Usos (Atual / Total)</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            {{#each habilidadesList}}
            <tr>
              <td>{{this.nome}}</td>
              <td>{{this.descricao}}</td>
              <td>{{this.usos.atual}} / {{this.usos.total}}</td>
              <td class="ability-actions">
                <button type="button" class="habilidade-roll" data-index="{{this.index}}" title="Usar">üé≤</button>
                <button type="button" class="habilidade-edit" data-index="{{this.index}}" title="Editar">‚úèÔ∏è</button>
                <button type="button" class="habilidade-delete" data-index="{{this.index}}" title="Excluir">üóëÔ∏è</button>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </section>
</form>


